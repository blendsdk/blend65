// @fixture: parser/expressions/binary/shift-operators
// @category: parser
// @description: Tests parsing of bitwise shift operators
// @expect: success
// @output-contains: LDA
// @tags: expressions, binary, shift, bitwise

module ShiftOperators;

function main(): void {
    let value: byte = $0F;
    
    // Left shift
    let shiftLeft: byte = value << 1;
    
    // Right shift
    let shiftRight: byte = value >> 1;
    
    // Multiple bit shift
    let shift4: byte = value << 4;
    
    // Shift with variable amount
    let amount: byte = 2;
    let varShift: byte = value << amount;
    
    // Chained shifts
    let chainShift: byte = value << 2 >> 1;
    
    // Shift in expression
    let masked: byte = (value << 4) | (value >> 4);
    
    // Shift with mask
    let highNibble: byte = $F0 >> 4;
    let lowNibble: byte = $0F << 4;
    
    // Word shift
    let wordVal: word = $00FF;
    let wordShift: word = wordVal << 8;
    
    // Store results
    poke($0400, shiftLeft);
    poke($0401, shiftRight);
    poke($0402, masked);
}