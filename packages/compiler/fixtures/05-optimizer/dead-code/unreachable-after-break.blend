// @fixture: optimizer/dead-code/unreachable-after-break
// @category: optimizer
// @description: Tests dead code elimination for code after break statements in loops
// @expect: success
// @output-contains: RTS
// @tags: optimizer, dead-code, break, unreachable

module UnreachableAfterBreak;

function findFirst(): byte {
    let found: byte = 0;
    
    for (i = 0 to 10) {
        if (i == 5) {
            found = i;
            break;
            // This code is unreachable after break
            poke($D020, 1);
            found = 255;
        }
    }
    
    return found;
}

function main(): void {
    let result: byte = findFirst();
    poke($0400, result);
}