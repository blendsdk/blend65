# IL Generator Integration

> **Document**: 40-integration/42-il.md
> **Parent**: [40-overview.md](40-overview.md)

## Changes Required

```typescript
// il/generator.ts
class ILGenerator {
  private frameMap: FrameMap;
  private currentFunction: string;

  generate(program: Program, frameMap: FrameMap): ILProgram {
    this.frameMap = frameMap;
    // ... generate IL
  }

  private visitVariableAccess(node: VariableAccess): ILValue {
    const frame = this.frameMap.get(this.currentFunction);
    const slot = frame?.slots.find(s => s.name === node.getName());
    
    if (slot) {
      return {
        kind: 'address',
        address: slot.address,
        location: slot.location,
        size: slot.size,
      };
    }
    // Fall back to global lookup
    return this.visitGlobalAccess(node);
  }
}

// il/types.ts
export interface ILValue {
  kind: 'address' | 'immediate' | 'register';
  address?: number;
  location?: SlotLocation;  // NEW: ZeroPage, FrameRegion, or GeneralRAM
  size: number;
  value?: number;
}
```

---

## Session
Implement in Session 4.2 per [../99-execution-plan.md](../99-execution-plan.md)